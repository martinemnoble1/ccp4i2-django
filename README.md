# ccp4x

## Development

Clone the project from GitHub,
install the dependencies, make an inital database migration
and start the Django development server for the REST API.
ccp4x has ccp4i2 as a requirement, and the currently supported mechanism
for this is to operate it via a dedicated installation of ccp4, since some
of the ccp4x dependencies wil overwrite different versions of those dependencies
provided (and required) by the main ccp4 install.

```console
user:~$ git clone https://github.com/paulsbond/ccp4x
user:~$ cd ccp4x/server
user:~/ccp4x/server$ ccp4-python -m pip install --editable .
user:~/ccp4x/server$ ccp4-python manage.py migrate
user:~/ccp4x/server$ ccp4-python manage.py runserver
```

There should now be a browsable API with autogenerated forms
at http://localhost:8000.
For easy viewing of the REST API and Next.js logs separately,
start the Next.js development server in a new terminal.

```console
user:~/ccp4x/server$ cd ../client
user:~/ccp4x/client$ npm ci
user:~/ccp4x/client$ npm run dev
```

Open a browser at http://localhost:3000 to view the app.
The Django server and the Next.js server
will both automatically restart
when any changes are made to files.

If making any changes to the database models,
run the following commands to update the database
then restart the server:

```console
user:~/ccp4x$ python manage.py makemigrations
user:~/ccp4x$ python manage.py migrate
```
